#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 Running pre-commit checks..."

# Run lint-staged to format and lint staged files
echo "📝 Running lint-staged..."
npx lint-staged

# Run tests to ensure code quality
echo "🧪 Running tests..."
pnpm test

# Check if tests passed
if [ $? -eq 0 ]; then
    echo "✅ All tests passed! Proceeding with commit..."
else
    echo "❌ Tests failed! Please fix the issues before committing."
    exit 1
fi
